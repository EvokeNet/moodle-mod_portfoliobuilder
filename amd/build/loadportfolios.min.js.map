{"version":3,"file":"loadportfolios.min.js","sources":["../src/loadportfolios.js"],"sourcesContent":["/**\n * Add comment js logic.\n *\n * @package\n * @subpackage mod_portfoliobuilder\n * @copyright  2022 World Bank Group <https://worldbank.org>\n * @author     Willian Mano <willianmanoaraujo@gmail.com>\n */\n/* eslint-disable */\ndefine(['jquery', 'core/ajax', 'core/templates'], function($, Ajax, Templates) {\n    var LoadPortfolios = function(courseid) {\n        this.courseid = courseid;\n\n        this.targetdiv = '#' + this.type + 'portfolio';\n\n        this.controlbutton = document.getElementById(this.type + 'portfolio-tab');\n\n        this.type = this.controlbutton.dataset.type;\n\n        this.loadItems();\n\n        $('.nav-tabs .nav-link, .nav-pills .nav-link').click(function(event) {\n            this.controlbutton = event.target;\n\n            this.type = event.target.dataset.type;\n\n            this.targetdiv = event.target.dataset.target;\n\n            console.log(event.target.dataset.loaded);\n            if (event.target.dataset.loaded === 'false') {\n                this.loadItems();\n            }\n        }.bind(this));\n    }\n\n    LoadPortfolios.prototype.loadItems = function() {\n        const request = Ajax.call([{\n            methodname: 'mod_portfoliobuilder_loadportfolios',\n            args: {\n                courseid: this.courseid,\n                type: this.type\n            }\n        }]);\n\n        request[0].done(function(response) {\n            var data = JSON.parse(response.data);\n\n            this.handleLoadData(data);\n        }.bind(this));\n    };\n\n    LoadPortfolios.prototype.handleLoadData = function(data) {\n        const targetdiv = $(this.targetdiv);\n\n        targetdiv.find('.entry_loading-placeholder').addClass('hidden');\n\n        $.each(data, function(index, value) {\n            Templates.render('mod_portfoliobuilder/portfolio_card', value).then(function(content) {\n                targetdiv.find('.entries .card-columns').append(content);\n            });\n        });\n\n        this.controlbutton.dataset.loaded = true;\n    };\n\n    LoadPortfolios.prototype.courseid = 0;\n\n    LoadPortfolios.prototype.type = 'team';\n\n    LoadPortfolios.prototype.targetdiv = '#teamportfolio';\n\n    LoadPortfolios.prototype.controlbutton = null;\n\n    return {\n        'init': function(courseid) {\n            return new LoadPortfolios(courseid);\n        }\n    };\n});\n"],"names":["define","$","Ajax","Templates","LoadPortfolios","courseid","targetdiv","this","type","controlbutton","document","getElementById","dataset","loadItems","click","event","target","console","log","loaded","bind","prototype","call","methodname","args","done","response","data","JSON","parse","handleLoadData","find","addClass","each","index","value","render","then","content","append"],"mappings":"AASAA,6CAAO,CAAC,SAAU,YAAa,mBAAmB,SAASC,EAAGC,KAAMC,eAC5DC,eAAiB,SAASC,eACrBA,SAAWA,cAEXC,UAAY,IAAMC,KAAKC,KAAO,iBAE9BC,cAAgBC,SAASC,eAAeJ,KAAKC,KAAO,sBAEpDA,KAAOD,KAAKE,cAAcG,QAAQJ,UAElCK,YAELZ,EAAE,6CAA6Ca,MAAM,SAASC,YACrDN,cAAgBM,MAAMC,YAEtBR,KAAOO,MAAMC,OAAOJ,QAAQJ,UAE5BF,UAAYS,MAAMC,OAAOJ,QAAQI,OAEtCC,QAAQC,IAAIH,MAAMC,OAAOJ,QAAQO,QACG,UAAhCJ,MAAMC,OAAOJ,QAAQO,aAChBN,aAEXO,KAAKb,eAGXH,eAAeiB,UAAUR,UAAY,WACjBX,KAAKoB,KAAK,CAAC,CACvBC,WAAY,sCACZC,KAAM,CACFnB,SAAUE,KAAKF,SACfG,KAAMD,KAAKC,SAIX,GAAGiB,KAAK,SAASC,cACjBC,KAAOC,KAAKC,MAAMH,SAASC,WAE1BG,eAAeH,OACtBP,KAAKb,QAGXH,eAAeiB,UAAUS,eAAiB,SAASH,YACzCrB,UAAYL,EAAEM,KAAKD,WAEzBA,UAAUyB,KAAK,8BAA8BC,SAAS,UAEtD/B,EAAEgC,KAAKN,MAAM,SAASO,MAAOC,OACzBhC,UAAUiC,OAAO,sCAAuCD,OAAOE,MAAK,SAASC,SACzEhC,UAAUyB,KAAK,0BAA0BQ,OAAOD,oBAInD7B,cAAcG,QAAQO,QAAS,GAGxCf,eAAeiB,UAAUhB,SAAW,EAEpCD,eAAeiB,UAAUb,KAAO,OAEhCJ,eAAeiB,UAAUf,UAAY,iBAErCF,eAAeiB,UAAUZ,cAAgB,KAElC,MACK,SAASJ,iBACN,IAAID,eAAeC"}