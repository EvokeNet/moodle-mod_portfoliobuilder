{"version":3,"file":"loadportfolios.min.js","sources":["../src/loadportfolios.js"],"sourcesContent":["/**\n * Add comment js logic.\n *\n * @copyright   2023 World Bank Group <https://worldbank.org>\n * @author      Willian Mano <willianmanoaraujo@gmail.com>\n */\n/* eslint-disable */\ndefine(['jquery', 'core/ajax', 'core/templates'], function($, Ajax, Templates) {\n    var LoadPortfolios = function(courseid, type) {\n        this.courseid = courseid;\n\n        this.type = type;\n\n        this.targetdiv = '#' + this.type + 'portfolio';\n\n        this.controlbutton = document.getElementById(this.type + 'portfolio-tab');\n\n        this.loadItems();\n\n        $('.nav-tabs .nav-link, .nav-pills .nav-link').click(function(event) {\n            this.controlbutton = event.target;\n\n            this.type = event.target.dataset.type;\n\n            this.targetdiv = event.target.dataset.target;\n\n            if (event.target.dataset.loaded === 'false') {\n                this.loadItems();\n            }\n        }.bind(this));\n\n        $('#input-group').change(function(event) {\n            this.groupid = event.target.value;\n\n            this.loadItemsWithFilters();\n        }.bind(this));\n    }\n\n    LoadPortfolios.prototype.loadItems = function() {\n        const request = Ajax.call([{\n            methodname: 'mod_portfoliobuilder_loadportfolios',\n            args: {\n                courseid: this.courseid,\n                type: this.type\n            }\n        }]);\n\n        request[0].done(function(response) {\n            var data = JSON.parse(response.data);\n\n            this.handleLoadData(data);\n        }.bind(this));\n    };\n\n    LoadPortfolios.prototype.handleLoadData = function(data) {\n        const targetdiv = $(this.targetdiv);\n\n        targetdiv.find('.entry_loading-placeholder').addClass('hidden');\n\n        $.each(data, function(index, value) {\n            Templates.render('mod_portfoliobuilder/portfolio_card', value).then(function(content) {\n                targetdiv.find('.entries .card-columns').append(content);\n            });\n        });\n\n        this.controlbutton.dataset.loaded = true;\n    };\n\n    LoadPortfolios.prototype.loadItemsWithFilters = function() {\n        const targetdiv = $(this.targetdiv);\n\n        targetdiv.find('.entry_loading-placeholder').removeClass('hidden');\n\n        var args = {\n            courseid: this.courseid,\n            type: this.type\n        };\n\n        if (this.groupid !== 0) {\n            args.groupid = this.groupid;\n        }\n\n        const request = Ajax.call([{\n            methodname: 'mod_portfoliobuilder_loadportfolios',\n            args: args\n        }]);\n\n        request[0].done(function(response) {\n            var data = JSON.parse(response.data);\n\n            this.handleLoadDataWithFilters(data);\n        }.bind(this));\n    };\n\n    LoadPortfolios.prototype.handleLoadDataWithFilters = function(data) {\n        const targetdiv = $(this.targetdiv);\n\n        targetdiv.find('.entry_loading-placeholder').addClass('hidden');\n\n        $(targetdiv.find('.entries .card-columns')).empty();\n\n        $.each(data, function(index, value) {\n            Templates.render('mod_portfoliobuilder/portfolio_card', value).then(function(content) {\n                targetdiv.find('.entries .card-columns').append(content);\n            });\n        });\n\n        this.controlbutton.dataset.loaded = true;\n    };\n\n    LoadPortfolios.prototype.courseid = 0;\n\n    LoadPortfolios.prototype.type = 'team';\n\n    LoadPortfolios.prototype.groupid = 0;\n\n    LoadPortfolios.prototype.targetdiv = '#teamportfolio';\n\n    LoadPortfolios.prototype.controlbutton = null;\n\n    return {\n        'init': function(courseid, type = 'team') {\n            return new LoadPortfolios(courseid, type);\n        }\n    };\n});\n"],"names":["define","$","Ajax","Templates","LoadPortfolios","courseid","type","this","targetdiv","controlbutton","document","getElementById","loadItems","click","event","target","dataset","loaded","bind","change","groupid","value","loadItemsWithFilters","prototype","call","methodname","args","done","response","data","JSON","parse","handleLoadData","find","addClass","each","index","render","then","content","append","removeClass","handleLoadDataWithFilters","empty","init","arguments","length","undefined"],"mappings":"AAOAA,OAAO,sCAAA,CAAC,SAAU,YAAa,mBAAmB,SAASC,EAAGC,KAAMC,WAChE,IAAIC,eAAiB,SAASC,SAAUC,MACpCC,KAAKF,SAAWA,SAEhBE,KAAKD,KAAOA,KAEZC,KAAKC,UAAY,IAAMD,KAAKD,KAAO,YAEnCC,KAAKE,cAAgBC,SAASC,eAAeJ,KAAKD,KAAO,iBAEzDC,KAAKK,YAELX,EAAE,6CAA6CY,MAAM,SAASC,OAC1DP,KAAKE,cAAgBK,MAAMC,OAE3BR,KAAKD,KAAOQ,MAAMC,OAAOC,QAAQV,KAEjCC,KAAKC,UAAYM,MAAMC,OAAOC,QAAQD,OAEF,UAAhCD,MAAMC,OAAOC,QAAQC,QACrBV,KAAKK,WAEb,EAAEM,KAAKX,OAEPN,EAAE,gBAAgBkB,OAAO,SAASL,OAC9BP,KAAKa,QAAUN,MAAMC,OAAOM,MAE5Bd,KAAKe,sBACT,EAAEJ,KAAKX,QAqFX,OAlFAH,eAAemB,UAAUX,UAAY,WACjBV,KAAKsB,KAAK,CAAC,CACvBC,WAAY,sCACZC,KAAM,CACFrB,SAAUE,KAAKF,SACfC,KAAMC,KAAKD,SAIX,GAAGqB,KAAK,SAASC,UACrB,IAAIC,KAAOC,KAAKC,MAAMH,SAASC,MAE/BtB,KAAKyB,eAAeH,KACxB,EAAEX,KAAKX,QAGXH,eAAemB,UAAUS,eAAiB,SAASH,MAC/C,IAAMrB,UAAYP,EAAEM,KAAKC,WAEzBA,UAAUyB,KAAK,8BAA8BC,SAAS,UAEtDjC,EAAEkC,KAAKN,MAAM,SAASO,MAAOf,OACzBlB,UAAUkC,OAAO,sCAAuChB,OAAOiB,MAAK,SAASC,SACzE/B,UAAUyB,KAAK,0BAA0BO,OAAOD,QACpD,GACJ,IAEAhC,KAAKE,cAAcO,QAAQC,QAAS,GAGxCb,eAAemB,UAAUD,qBAAuB,WAC1BrB,EAAEM,KAAKC,WAEfyB,KAAK,8BAA8BQ,YAAY,UAEzD,IAAIf,KAAO,CACPrB,SAAUE,KAAKF,SACfC,KAAMC,KAAKD,MAGM,IAAjBC,KAAKa,UACLM,KAAKN,QAAUb,KAAKa,SAGRlB,KAAKsB,KAAK,CAAC,CACvBC,WAAY,sCACZC,KAAMA,QAGF,GAAGC,KAAK,SAASC,UACrB,IAAIC,KAAOC,KAAKC,MAAMH,SAASC,MAE/BtB,KAAKmC,0BAA0Bb,KACnC,EAAEX,KAAKX,QAGXH,eAAemB,UAAUmB,0BAA4B,SAASb,MAC1D,IAAMrB,UAAYP,EAAEM,KAAKC,WAEzBA,UAAUyB,KAAK,8BAA8BC,SAAS,UAEtDjC,EAAEO,UAAUyB,KAAK,2BAA2BU,QAE5C1C,EAAEkC,KAAKN,MAAM,SAASO,MAAOf,OACzBlB,UAAUkC,OAAO,sCAAuChB,OAAOiB,MAAK,SAASC,SACzE/B,UAAUyB,KAAK,0BAA0BO,OAAOD,QACpD,GACJ,IAEAhC,KAAKE,cAAcO,QAAQC,QAAS,GAGxCb,eAAemB,UAAUlB,SAAW,EAEpCD,eAAemB,UAAUjB,KAAO,OAEhCF,eAAemB,UAAUH,QAAU,EAEnChB,eAAemB,UAAUf,UAAY,iBAErCJ,eAAemB,UAAUd,cAAgB,KAElC,CACHmC,KAAQ,SAASvC,UACb,OAAO,IAAID,eAAeC,SADCwC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,OAElC,EAER"}