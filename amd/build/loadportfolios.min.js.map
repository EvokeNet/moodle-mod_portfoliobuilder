{"version":3,"file":"loadportfolios.min.js","sources":["../src/loadportfolios.js"],"sourcesContent":["/**\n * Add comment js logic.\n *\n * @copyright   2023 World Bank Group <https://worldbank.org>\n * @author      Willian Mano <willianmanoaraujo@gmail.com>\n */\n/* eslint-disable */\ndefine(['jquery', 'core/ajax', 'core/templates'], function($, Ajax, Templates) {\n    var LoadPortfolios = function(courseid, type) {\n        this.courseid = courseid;\n\n        this.type = type;\n\n        this.targetdiv = '#' + this.type + 'portfolio';\n\n        this.controlbutton = document.getElementById(this.type + 'portfolio-tab');\n\n        this.loadItems();\n\n        $('.nav-tabs .nav-link, .nav-pills .nav-link').click(function(event) {\n            this.controlbutton = event.target;\n\n            this.type = event.target.dataset.type;\n\n            this.targetdiv = event.target.dataset.target;\n\n            if (event.target.dataset.loaded === 'false') {\n                this.loadItems();\n            }\n        }.bind(this));\n    }\n\n    LoadPortfolios.prototype.loadItems = function() {\n        const request = Ajax.call([{\n            methodname: 'mod_portfoliobuilder_loadportfolios',\n            args: {\n                courseid: this.courseid,\n                type: this.type\n            }\n        }]);\n\n        request[0].done(function(response) {\n            var data = JSON.parse(response.data);\n\n            this.handleLoadData(data);\n        }.bind(this));\n    };\n\n    LoadPortfolios.prototype.handleLoadData = function(data) {\n        const targetdiv = $(this.targetdiv);\n\n        targetdiv.find('.entry_loading-placeholder').addClass('hidden');\n\n        $.each(data, function(index, value) {\n            Templates.render('mod_portfoliobuilder/portfolio_card', value).then(function(content) {\n                targetdiv.find('.entries .card-columns').append(content);\n            });\n        });\n\n        this.controlbutton.dataset.loaded = true;\n    };\n\n    LoadPortfolios.prototype.courseid = 0;\n\n    LoadPortfolios.prototype.type = 'team';\n\n    LoadPortfolios.prototype.targetdiv = '#teamportfolio';\n\n    LoadPortfolios.prototype.controlbutton = null;\n\n    return {\n        'init': function(courseid, type = 'team') {\n            return new LoadPortfolios(courseid, type);\n        }\n    };\n});\n"],"names":["define","$","Ajax","Templates","LoadPortfolios","courseid","type","targetdiv","this","controlbutton","document","getElementById","loadItems","click","event","target","dataset","loaded","bind","prototype","call","methodname","args","done","response","data","JSON","parse","handleLoadData","find","addClass","each","index","value","render","then","content","append"],"mappings":"AAOAA,6CAAO,CAAC,SAAU,YAAa,mBAAmB,SAASC,EAAGC,KAAMC,eAC5DC,eAAiB,SAASC,SAAUC,WAC/BD,SAAWA,cAEXC,KAAOA,UAEPC,UAAY,IAAMC,KAAKF,KAAO,iBAE9BG,cAAgBC,SAASC,eAAeH,KAAKF,KAAO,sBAEpDM,YAELX,EAAE,6CAA6CY,MAAM,SAASC,YACrDL,cAAgBK,MAAMC,YAEtBT,KAAOQ,MAAMC,OAAOC,QAAQV,UAE5BC,UAAYO,MAAMC,OAAOC,QAAQD,OAEF,UAAhCD,MAAMC,OAAOC,QAAQC,aAChBL,aAEXM,KAAKV,eAGXJ,eAAee,UAAUP,UAAY,WACjBV,KAAKkB,KAAK,CAAC,CACvBC,WAAY,sCACZC,KAAM,CACFjB,SAAUG,KAAKH,SACfC,KAAME,KAAKF,SAIX,GAAGiB,KAAK,SAASC,cACjBC,KAAOC,KAAKC,MAAMH,SAASC,WAE1BG,eAAeH,OACtBP,KAAKV,QAGXJ,eAAee,UAAUS,eAAiB,SAASH,YACzClB,UAAYN,EAAEO,KAAKD,WAEzBA,UAAUsB,KAAK,8BAA8BC,SAAS,UAEtD7B,EAAE8B,KAAKN,MAAM,SAASO,MAAOC,OACzB9B,UAAU+B,OAAO,sCAAuCD,OAAOE,MAAK,SAASC,SACzE7B,UAAUsB,KAAK,0BAA0BQ,OAAOD,oBAInD3B,cAAcO,QAAQC,QAAS,GAGxCb,eAAee,UAAUd,SAAW,EAEpCD,eAAee,UAAUb,KAAO,OAEhCF,eAAee,UAAUZ,UAAY,iBAErCH,eAAee,UAAUV,cAAgB,KAElC,MACK,SAASJ,cAAUC,4DAAO,cACvB,IAAIF,eAAeC,SAAUC"}