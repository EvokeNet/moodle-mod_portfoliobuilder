define("mod_portfoliobuilder/togglelike",["jquery","core/ajax","mod_portfoliobuilder/sweetalert"],(function($,Ajax,Swal){var ToggleLike=function(){this.registerEventListeners()};return ToggleLike.prototype.registerEventListeners=function(){$(document).on("click",".likebutton",function(event){var entrydiv=$(event.currentTarget).closest(".entry");if(0===entrydiv.length||entrydiv.length>1)this.showToast("error","Error trying to find the discussion for this comment.");else{var id=entrydiv.data("id");Ajax.call([{methodname:"mod_portfoliobuilder_togglereaction",args:{entryid:id,reactionid:1}}])[0].done(function(data){var likebutton=entrydiv.find(".actions .likebutton"),totalreactionsspan=entrydiv.find(".actions .likebutton .totalreactions");totalreactionsspan.empty(),likebutton.toggleClass("hasreacted"),0!=data.message&&"false"!=data.message&&totalreactionsspan.text(data.message)}.bind(this)).fail(function(error){var message=error.message;message||(message=error.error),this.showToast("error",message)}.bind(this))}}.bind(this))},ToggleLike.prototype.showToast=function(type,message){Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:8e3,timerProgressBar:!0,onOpen:toast=>{toast.addEventListener("mouseenter",Swal.stopTimer),toast.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:type,title:message})},{init:function(){return new ToggleLike}}}));

//# sourceMappingURL=togglelike.min.js.map